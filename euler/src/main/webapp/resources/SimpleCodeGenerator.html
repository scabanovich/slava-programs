<html>
  <head>  
    <script type="text/javascript">
      var templates = new Map();
      
      var selected;
      
      function loadTemplates() {
    	  var e = document.getElementById("templates");
    	  var c = e.childNodes;
    	  for (var i = 0; i < c.length; i++) {
    		  if (c[i] instanceof Element) {
    			  var id = c[i].getAttribute("id");
    			  templates.set(id, c[i]);    			  
    		  }
    	  }
    	  e.parentElement.removeChild(e);
      }

      function setTemplate(templateId) {
    	  var t = templates.get(templateId);
    	  selected = t;
    	  if (t) {
    		  var e = document.getElementById("formArea");
    		  e.innerHTML = "";
    		  e.appendChild(t);
    		  generate();
    	  }
      }

      function generate() {
    	  if (selected) {
    		  var ev = document.createEvent('Events')
    		  ev.initEvent("click", true, false);
    		  selected.dispatchEvent(ev);
    		  setTimeout(function() {copyToClipboard('output');}, 100);
    	  }
      }
  
      function copyToClipboard(sourceId) {
    	  var active = document.activeElement;
    	  var e = document.getElementById(sourceId);
    	  e.select();
    	  e.setSelectionRange(0, e.value.length);
    	  document.execCommand("copy");
    	  e.setSelectionRange(e.value.length, e.value.length);
    	  active.focus();
      }
   
      function writeToOut(text) {
    	  var e = document.getElementById("output");
    	  var ls = text.split("\n");
    	  var indent = document.getElementById("indent").value;
    	  var is = (indent == "1") ? "    " : (indent == "2") ? "        " : "";
    	  var indentedText = "";
    	  for (var i = 0; i < ls.length; i++) {
    		  indentedText += is + ls[i] + "\n";
    	  }
    	  e.value = indentedText;
      }
      
      function value(inputId) {
    	  return document.getElementById(inputId).value;
      }
      
    </script>
  </head>
  
  <body onload="loadTemplates();">
  
  <table>
     <tr>
        <td rowspan="3" style="width: 25%; vertical-align: top;">
          <ul>
            <li><a onclick="setTemplate('template-for-over-array');" href="#">For over array</a></li>
            <li><a onclick="setTemplate('template-for-over-list');" href="#">For over list</a></li>
            <li><a onclick="setTemplate('template-for-over-string');" href="#">For over string</a></li>
            <li><a onclick="setTemplate('template-new');" href="#">New</a></li>
          </ul>
        </td>
        <td style="width: 80%; padding-left: 20px; padding-bottom: 20px;" id="formArea">
        	Form goes here.
        </td>
     </tr>
     <tr>
     	<td style="padding-left: 20px">
     	  <table>
     	    <tr>
     	      <td rowspan="2">
 		     	  <textarea id="output" cols="60" rows="15"></textarea>
     	      </td>
     	      <td style="vertical-align: top;">
     	          <table>
     	            <tr><td><button onclick="generate();" style="width: 70px;">Generate</button></td></tr>
     	            <tr><td><button onclick="copyToClipboard('output');" style="width: 70px;">Copy</button></td></tr>
     	          </table>
     	      </td>
     	    </tr>
     	    <tr>
     	      <td style="vertical-align: bottom;">
     	          <table>
     	            <tr><td>Indent: <input type="text" value="2" id="indent" style="width: 30px;"></td></tr>
     	          </table>
     	      </td>
     	    </tr>
     	  </table>
     	</td>
     </tr>
  </table>
  
  <div id="templates">
  <!-- For Over Array -->
    <div id="template-for-over-array" onclick="writeToOut(generateForOverArray());">
      <script type="text/javascript">
      	function generateForOverArray() {
      		var i = value('for-array-i');
      		var n = value('for-array-name');
      		var b = document.getElementById('for-array-back').checked;
      		var v = value('for-array-value');
      		var t = value('for-array-type');
      		if (b) {
      			return "for (int " + i + " = " + n + ".length - 1; " + i + " >= 0; " + i + "--) {\n"
      		    + "    " + t + " " + v + " = " + n + "[" + i + "];\n"      		    
      			+ "\n}";
      		}
      		return "for (int " + i + " = 0; " + i + " < " + n + ".length; " + i + "++) {\n"
  		    + "    " + t + " " + v + " = " + n + "[" + i + "];\n"      		    
      		    + "\n}"
      	}
      </script>
      <h3>for over array</h3>
      Var: <input type="text" style="width: 40px" value="i" id="for-array-i" oninput="generate();"/>&nbsp;
      Array: <input type="text" style="width: 60px" value="a" id="for-array-name" oninput="generate();"/>&nbsp;
      Backwards: <input type="checkbox" id="for-array-back" oninput="generate();"/><br/><br/>
      Value: <input type="text" style="width: 40px" value="v" id="for-array-value" oninput="generate();"/>&nbsp;
      Type: <select id="for-array-type" oninput="generate();">
      		  <option value="int" selected>int</option>
      		  <option value="long">long</option>
      		  <option value="char">char</option>
      		  <option value="String">String</option>
      		</select>
      
    </div>

  <!-- For Over List -->
    <div id="template-for-over-list" onclick="writeToOut(generateForOverList());">
      <script type="text/javascript">
      	function generateForOverList() {
      		var i = value('for-list-i');
      		var n = value('for-list-name');
      		var b = document.getElementById('for-list-back').checked;
      		var v = value('for-list-value');
      		var t = value('for-list-type');
      		var vt = "    "
      		if (b) {
      			return "for (int " + i + " = " + n + ".size() - 1; " + i + " >= 0; " + i + "--) {\n"
      		    + "    " + t + " " + v + " = " + n + ".get(" + i + ");\n"      		    
      			+ "\n}";
      		}
      		return "for (int " + i + " = 0; " + i + " < " + n + ".size(); " + i + "++) {\n"
	  		    + "    " + t + " " + v + " = " + n + ".get(" + i + ");\n"      		    
      		    + "\n}"
      	}
      </script>
      <h3>for over list</h3>
      Var: <input type="text" style="width: 40px" value="i" id="for-list-i" oninput="generate();"/>&nbsp;
      List: <input type="text" style="width: 60px" value="a" id="for-list-name" oninput="generate();"/>&nbsp;
      Backwards: <input type="checkbox" id="for-list-back" oninput="generate();"/><br/><br/>
      Value: <input type="text" style="width: 40px" value="v" id="for-list-value" oninput="generate();"/>&nbsp;
      Type: <select id="for-list-type" oninput="generate();">
      		  <option value="int" selected>int</option>
      		  <option value="long">long</option>
      		  <option value="char">char</option>
      		  <option value="String">String</option>
      		</select>
    </div>

  <!-- For Over String -->
    <div id="template-for-over-string" onclick="writeToOut(generateForOverString());">
      <script type="text/javascript">
      	function generateForOverString() {
      		var i = value('for-string-i');
      		var n = value('for-string-name');
      		var c = value('for-string-char');
      		var b = document.getElementById('for-string-back').checked;
      		if (b) {
      			return "for (int " + i + " = " + n + ".length() - 1; " + i + " >= 0; " + i + "--) {\n"
      				+ "    char " + c + " = " + n + ".charAt(" + i + ");\n"
      				+ "    \n}";
      		}
      		return "for (int " + i + " = 0; " + i + " < " + n + ".length(); " + i + "++) {\n"
					+ "    char " + c + " = " + n + ".charAt(" + i + ");\n"
  					+ "    \n}";
      	}
      </script>
      <h3>for over string</h3>
      Var: <input type="text" style="width: 40px" value="i" id="for-string-i" oninput="generate();"/>&nbsp;
      Name: <input type="text" style="width: 60px" value="s" id="for-string-name" oninput="generate();"/>&nbsp;
      Backwards: <input type="checkbox" id="for-string-back" onchange="generate()"/>&nbsp;
      char: <input type="text" style="width: 40px" value="c" id="for-string-char" oninput="generate();"/>
    </div>


    <div id="template-new" onclick="writeToOut(generateNew());">
      <script type="text/javascript">
      	function generateNew() {
     		return "StringBuilder sb = new StringBuilder();\n"
      	}
      </script>
      <h3>new</h3>
      Template new
    </div>
  </div>
  </body>

</html>