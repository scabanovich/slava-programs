<html>
  <head>
    <!-- Problem 36 -->
    <title>Double-base palindromes</title>
    <link rel="stylesheet" href="common.css"/>
    <script src="common.js"></script>
    <script type="text/javascript">
    	function isNumberPalindrom(n, b) {
    		var ds = common.math.getDigitsInBase(n, b);
    		for (var i = 0; i < ds.length; i++) {
    			var j = ds.length - 1 - i;
    			if (j <= i) {
    				break;
    			}
    			if (ds[i] != ds[j]) {
    				return false;
    			}
    		}
    		return true;
    	}
    	
    	function countPalindromicNumbersAndOut(limit, b, targetId) {
    		if (!validate(limit, b, targetId)) {
    			return;
    		}
    		var count = 0;
    		var sum = 0;
    		for (var n = 1; n < limit; n++) {
    			if (isNumberPalindrom(n, 10) && isNumberPalindrom(n, b)) {
    				count++;
    				sum += n;
    			}
    		}
    		common.out("Count: " + count + " Sum: " + sum, targetId);
    	}
    	
    	function validate(limit, b, targetId) {
    		var error = "";
    		if (!Number.isInteger(b)) {
    			error = "<i>b</i> must be an integer greater than 1.";
    		}
    		if (b <= 1) {
    			error = "<i>b</i> must be greater than 1.";
    		} else if (limit > 10000000) {
    			error = "Too large <i>limit</i>.";
    		}
    		
    		if (error.length > 0) {
    			common.out("<span style='color: red;'>" + error + "</span>", targetId);
    			return false;
    		}
    		return true;
    	}
    </script>  
  </head>
  
  <body onload="common.addProblemHeader('problem36Title', 36);">
    <div id="problem36Title"></div>
    <div class="problemStatement">
		<p>The decimal number, 585 = 1001001001<sub>2</sub> (binary), is palindromic in both bases.</p>
		<p>Find the sum of all numbers, less than one million, which are palindromic in base 10 and base 2.</p>
		<p>(Please note that the palindromic number, in either base, may not include leading zeros.)</p>
    </div>
    
    <table style="border-spacing: 10px;">
      <tr><td colspan="4"><b>Count all numbers below <i>limit</i>, palindromic in base 10 and base <i>b</i></b></td></tr>
      <tr>
        <td>Base:</td><td><input name="b" id="b" value="1" onkeypress="common.out('', 'out1');"/></td>
      </tr>
      <tr>
        <td>Limit:</td><td><input name="limit" id="limit" value="1" onkeypress="common.out('', 'out1');"/></td>
        <td><button onclick="countPalindromicNumbersAndOut(common.getInt('limit'), common.getInt('b'), 'out1');">Solve</button></td>
        <td> <div id="out1"></div></td>
      </tr>
    </table>

    <a href="Euler.html">Back</a>
  </body>
</html>