<html>
  <head>
    <!-- Problem 65 -->
    <title>Convergents of e</title>
    <link rel="stylesheet" href="common.css"/>
    <script src="common.js"></script>
    <script type="text/javascript">
    	function solveAndOut(n, targetId) {
    		var na = common.math.BigNumber.ZERO;
    		var da = common.math.BigNumber.ONE;
    		var nb = common.math.BigNumber.ONE;
    		var db = common.math.BigNumber.ZERO;
    		for (var i = 1; i <= n; i++) {
    			var c = (i == 1) ? 2 : (i % 3 == 0) ? parseInt(i / 3) * 2 : 1;
    			var nc;
    			var dc;
    			if (c == 1) {
    				nc = na.add(nb);
    				dc = da.add(db);
    			} else {
    				var cBig = new common.math.BigNumber(c);
    				nc = na.add(nb.multiply(cBig));
    				dc = da.add(db.multiply(cBig));
    			}
    			na = nb;
    			da = db;
    			nb = nc;
    			db = dc;
    		}
    		var sum = 0;
    		for (var i = 0; i < nb.sourceArray.length; i++) {
    			sum += nb.sourceArray[i];
    		}
    		common.out("Result = " + sum, targetId);
    	}
    </script>  
  </head>
  
  <body onload="common.addProblemHeader('problem65Title', 65);">
    <div id="problem65Title"></div>
    <div class="problemStatement">
      <p>The square root of 2 can be written as an infinite continued fraction.</p>
      <p>The infinite continued fraction can be written, &#8730;2 = [1;(2)], (2) indicates that 2 repeats ad infinitum. In a similar way, &#8730;23 = [4;(1,3,1,8)].</p>
      <p>It turns out that the sequence of partial values of continued fractions for square roots provide the best rational approximations. Let us consider the convergents for &#8730;2.</p>
      <p>What is most surprising is that the important mathematical constant,</p>
      <p><i>e</i> = [2;1,2,1,1,4,1,1,6,1,...,1,2<i>k</i>,1,...].</p>
      <p>Find the sum of digits in the numerator of the 100<sup>th</sup> convergent of the continued fraction for <i>e</i>.</p>
    </div>
    
    <table style="border-spacing: 10px;">
      <tr><td colspan="5"><b>Find the sum of digits in the numerator of the <i>n</i><sup>th</sup> convergent</b></td></tr>
      <tr>
          <td>N:</td><td><input id="n1" name="n1" value="100" oninput="common.clearOut(['out2']);"/></td>
          <td><button id="b1" onclick="solveAndOut(common.getInt('n1'), 'out2')">Solve</button></td>
          <td><div id="out2"></div></td><td ></td>
      </tr>
    
    </table>

    <a href="Euler.html">Back</a>
  </body>
</html>