<html>
  <head>
    <!-- Problem 27 -->
    <title>Quadratic primes</title>
    <link rel="stylesheet" href="common.css"/>
    <script src="common.js"></script>
    <script>
		function getNumberOfGeneratedPrimes(a, b) {
			var k = 0;
			for (var n = 0; n < b; n++) {
				var f = n * n + a * n + b;
				if (f <= 1 || common.math.getMinimalDivisor(f) < f) {
					break;
				}
				k += 1;
			}			
			return k;
		}
		
		function getNumberOfGeneratedPrimesAndOut(a, b, targetId) {
			var k = getNumberOfGeneratedPrimes(a, b);
			common.out(k, targetId);
		}
		
		function findBestAB(limit) {
			var bestA = 0;
			var bestB = 0;
			var bestPrimeCount = 0;
			for (var b = 1; b <= limit; b++) {
				if (common.math.getMinimalDivisor(b) < b) {
					continue; //it should be prime.
				}
				for (var a = -limit; a <= limit; a++) {
					var c = getNumberOfGeneratedPrimes(a, b);
					if (c > bestPrimeCount) {
						bestPrimeCount = c;
						bestA = a;
						bestB = b;
					}				
				}
			}
			return {"a" : bestA, "b" : bestB, "primes" : bestPrimeCount};
		}
		
		function findBestABAndOut(limit, targetId) {
			common.out("", targetId);
			var result = findBestAB(limit);
			var s = "" + result.primes + " generated by <i>n</i><sup>2</sup>";
			if (result.a < 0) {
				s = s + " - "  + (-result.a) + "<i>n</i> + ";
			} else if (result.a == 1) {
				s = s + "<i>n</i> + "
			} else {
				s = s + " + "  + result.a + "<i>n</i> + ";
			}
			s = s + result.b;
			common.out(s, targetId);
		}
    
    </script>
  </head>
  
  <body onload="common.addProblemHeader('problem27Title', 27)">
    <div id="problem27Title"></div>
    <div class="problemStatement">
      <p>Euler discovered the remarkable quadratic formula:</p>
      <p style="text-align: center;"><i>n</i><sup>2</sup> + <i>n</i> + 41</p>
      <p>It turns out that the formula will produce 40 primes for the consecutive integer values 
      0 &le; <i>n</i> &le; 39. However, when n = 40, 40<sup>2</sup> + 40 + 41 = 40(40 + 1) + 41 
      is divisible by 41, and certainly when n = 41, 41<sup>2</sup> + 41 + 41 is clearly divisible by 41.<p>
      <p>The incredible formula <i>n</i><sup>2</sup> - 79<i>n</i> + 1601 was discovered, 
      which produces 80 primes for the consecutive values 0 &le; n &le; 79. 
      The product of the coefficients, -79 and 1601, is -126479.</p>
      <p>Considering quadratics of the form:</p>
      <p class="formulaIndent"><i>n</i><sup>2</sup> + <i>an</i> + <i>b</i>, where |<i>a</i>| < 1000 and |<i>b</i>| &le; 1000</p>
      <p class="formulaIndent">where |<i>n</i>| is the modulus/absolute value of <i>n</i></p>
      <p class="formulaIndent">e.g. |11|=11 and |-4|=4</p>
      <p>Find the product of the coefficients, <i>a</i> and <i>b</i>, for the quadratic expression that produces the maximum number of primes for consecutive values of <i>n</i>, starting with <i>n</i> = 0.</p>
    </div>
    
    <table style="border-spacing: 10px;">
      <tr><td colspan="4" style=""><b>Find number of primes generated by <i>n</i><sup>2</sup> + <i>an</i> + <i>b</i></b></td></tr>
      <tr><td>A:</td> <td><input name="a" value="1" id="a"/></td></tr>
      <tr>
          <td>B:</td> <td><input name="b" value="100" id="b"/></td>
          <td><button name="solve" onclick="getNumberOfGeneratedPrimesAndOut(common.getInt('a'), common.getInt('b'), 'out1');">Solve</button></td>
          <td>Generates primes: <span id="out1"></span></td>
     </tr>

      <tr><td colspan="4" style=""><b>Find maximum number of primes generated by <i>n</i><sup>2</sup> + <i>an</i> + <i>b</i></b></td></tr>
      <tr>
          <td>Limit:</td> <td><input name="lim" value="100" id="lim"/></td>
          <td><button name="solve" onclick="findBestABAndOut(common.getInt('lim'), 'out2');">Solve</button></td>
          <td>Generates primes: <span id="out2"></span></td>
     </tr>
    
    </table>
    
    <a href="Euler.html">Back</a>
  </body>
</html>